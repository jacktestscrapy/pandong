{"remainingRequest":"/Users/panda/code/vue3+ts/pandong/node_modules/babel-loader/lib/index.js!/Users/panda/code/vue3+ts/pandong/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/panda/code/vue3+ts/pandong/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/panda/code/vue3+ts/pandong/src/views/login/Login.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/panda/code/vue3+ts/pandong/src/views/login/Login.vue","mtime":1616240510824},{"path":"/Users/panda/code/vue3+ts/pandong/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/panda/code/vue3+ts/pandong/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/panda/code/vue3+ts/pandong/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/panda/code/vue3+ts/pandong/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3BhbmRhL2NvZGUvdnVlMyt0cy9wYW5kb25nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9wYW5kYS9jb2RlL3Z1ZTMrdHMvcGFuZG9uZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAidnVlLXJvdXRlciI7CmltcG9ydCB7IHJlYWN0aXZlLCB0b1JlZnMgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyBwb3N0IH0gZnJvbSAiLi4vLi4vdXRpbHMvcmVxdWVzdCI7CmltcG9ydCBUb2FzdCwgeyB1c2VUb2FzdEVmZmVjdCB9IGZyb20gIi4uLy4uL2NvbXBvbmVudHMvVG9hc3QudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMb2dpbiIsCiAgY29tcG9uZW50czogewogICAgVG9hc3Q6IFRvYXN0CiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CgogICAgdmFyIF91c2VUb2FzdEVmZmVjdCA9IHVzZVRvYXN0RWZmZWN0KCksCiAgICAgICAgc2hvdyA9IF91c2VUb2FzdEVmZmVjdC5zaG93LAogICAgICAgIHRvYXN0TWVzc2FnZSA9IF91c2VUb2FzdEVmZmVjdC50b2FzdE1lc3NhZ2UsCiAgICAgICAgc2hvd1RvYXN0ID0gX3VzZVRvYXN0RWZmZWN0LnNob3dUb2FzdDsgLy8g55So5oi35ZCN5ZKM5a+G56CBCgoKICAgIHZhciBkYXRhID0gcmVhY3RpdmUoewogICAgICB1c2VybmFtZTogIiIsCiAgICAgIHBhc3N3b3JkOiAiIgogICAgfSk7IC8vIOeZu+W9leWkhOeQhgoKICAgIHZhciBoYW5kbGVMb2dpbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy/or7fmsYLnmbvlvZXmjqXlj6Ms6LCD55So5bCB6KOF55qEcG9zdOaOpeWPowogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcG9zdCgiL2FwaS91c2VyL2xvZ2luIiwgewogICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBkYXRhLnVzZXJuYW1lLAogICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBkYXRhLnBhc3N3b3JkIC8vIFRPRE8g5qCh6aqM55So5oi36L6T5YWl55qE55So5oi35ZCN5ZKM5a+G56CBCgogICAgICAgICAgICAgICAgICB9KTsgLy8g5Yik5pat6L+U5Zue5YC8CgogICAgICAgICAgICAgICAgICBpZiAoKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdC5lcnJubykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuaXNMb2dpbiA9IHRydWU7IC8vIOi3s+i9rAoKICAgICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiSG9tZSIKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzaG93VG9hc3QoIueZu+W9leWksei0pSIpOyAvLyBhbGVydCgi55m75b2V5aSx6LSlIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgc2hvd1RvYXN0KCLnmbvlvZXor7fmsYLlpLHotKUiKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVMb2dpbigpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHZhciBoYW5kbGVSZWdpc3RlciA9IGZ1bmN0aW9uIGhhbmRsZVJlZ2lzdGVyKCkgewogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogIlJlZ2lzdGVyIgogICAgICB9KTsKICAgIH07CgogICAgdmFyIHRvcmVmc0RhdGEgPSB0b1JlZnMoZGF0YSk7CiAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7CiAgICAgIGhhbmRsZUxvZ2luOiBoYW5kbGVMb2dpbiwKICAgICAgaGFuZGxlUmVnaXN0ZXI6IGhhbmRsZVJlZ2lzdGVyLAogICAgICBzaG93OiBzaG93LAogICAgICB0b2FzdE1lc3NhZ2U6IHRvYXN0TWVzc2FnZQogICAgfSwgdG9yZWZzRGF0YSk7CiAgfQp9Ow=="},{"version":3,"sources":["/Users/panda/code/vue3+ts/pandong/src/views/login/Login.vue"],"names":[],"mappings":";;;AAgCA,SAAS,SAAT,QAA0B,YAA1B;AACA,SAAS,QAAT,EAAmB,MAAnB,QAAiC,KAAjC;AACA,SAAS,IAAT,QAAqB,qBAArB;AACA,OAAO,KAAP,IAAgB,cAAhB,QAAsC,4BAAtC;AAEA,eAAe;AACb,EAAA,IAAI,EAAE,OADO;AAEb,EAAA,UAAU,EAAE;AAAE,IAAA,KAAI,EAAJ;AAAF,GAFC;AAGb,EAAA,KAHa,mBAGL;AACN,QAAM,MAAK,GAAI,SAAS,EAAxB;;AADM,0BAEoC,cAAc,EAFlD;AAAA,QAEE,IAFF,mBAEE,IAFF;AAAA,QAEQ,YAFR,mBAEQ,YAFR;AAAA,QAEsB,SAFtB,mBAEsB,SAFtB,EAGN;;;AACA,QAAM,IAAG,GAAI,QAAQ,CAAC;AACpB,MAAA,QAAQ,EAAE,EADU;AAEpB,MAAA,QAAQ,EAAE;AAFU,KAAD,CAArB,CAJM,CAQN;;AACA,QAAM,WAAU;AAAA,yEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAClB;AACA,oBAAI;AACI,kBAAA,MADJ,GACa,IAAI,CAAC,iBAAD,EAAoB;AACrC,oBAAA,QAAQ,EAAE,IAAI,CAAC,QADsB;AAErC,oBAAA,QAAQ,EAAE,IAAI,CAAC,QAFsB,CAGrC;;AAHqC,mBAApB,CADjB,EAMF;;AACA,sBAAI,CAAA,MAAM,SAAN,IAAA,MAAM,WAAN,YAAA,MAAM,CAAE,KAAR,MAAkB,CAAtB,EAAyB;AACvB,oBAAA,YAAY,CAAC,OAAb,GAAuB,IAAvB,CADuB,CAEvB;;AACA,oBAAA,MAAM,CAAC,IAAP,CAAY;AAAE,sBAAA,IAAI,EAAE;AAAR,qBAAZ;AACF,mBAJA,MAIO;AACL,oBAAA,SAAS,CAAC,MAAD,CAAT,CADK,CAEL;AACF;AACF,iBAfA,CAeE,OAAO,CAAP,EAAU;AACV,kBAAA,SAAS,CAAC,QAAD,CAAT;AACF;;AAnBkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAV,WAAU;AAAA;AAAA;AAAA,OAAhB;;AAsBA,QAAM,cAAa,GAAI,SAAjB,cAAiB,GAAM;AAC3B,MAAA,MAAM,CAAC,IAAP,CAAY;AAAE,QAAA,IAAI,EAAE;AAAR,OAAZ;AACD,KAFD;;AAGA,QAAM,UAAS,GAAI,MAAM,CAAC,IAAD,CAAzB;AACA;AACE,MAAA,WAAW,EAAX,WADF;AAEE,MAAA,cAAc,EAAd,cAFF;AAGE,MAAA,IAAI,EAAJ,IAHF;AAIE,MAAA,YAAY,EAAZ;AAJF,OAKK,UALL;AAOD;AA7CY,CAAf","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <img\n      src=\"http://www.dell-lee.com/imgs/vue3/user.png\"\n      alt=\"用户头像\"\n      class=\"wrapper__img\"\n    />\n    <div class=\"wrapper__input\">\n      <input\n        type=\"text\"\n        class=\"wrapper__input__content\"\n        placeholder=\"请输入用户名\"\n        v-model=\"username\"\n      />\n    </div>\n    <div class=\"wrapper__input\">\n      <input\n        type=\"password\"\n        class=\"wrapper__input__content\"\n        placeholder=\"请输入密码\"\n        v-model=\"password\"\n        autocomplete=\"new-password\"\n      />\n    </div>\n    <div class=\"wrapper__login-button\" @click=\"handleLogin\">登录</div>\n    <div class=\"wrapper__login-link\" @click=\"handleRegister\">立即注册</div>\n    <div class=\"wrapper__login-link\">找回密码</div>\n    <Toast v-if=\"show\" :message=\"toastMessage\" />\n  </div>\n</template>\n\n<script>\nimport { useRouter } from \"vue-router\";\nimport { reactive, toRefs } from \"vue\";\nimport { post } from \"../../utils/request\";\nimport Toast, { useToastEffect } from \"../../components/Toast.vue\";\n\nexport default {\n  name: \"Login\",\n  components: { Toast },\n  setup() {\n    const router = useRouter();\n    const { show, toastMessage, showToast } = useToastEffect();\n    // 用户名和密码\n    const data = reactive({\n      username: \"\",\n      password: \"\",\n    });\n    // 登录处理\n    const handleLogin = async () => {\n      //请求登录接口,调用封装的post接口\n      try {\n        const result = post(\"/api/user/login\", {\n          username: data.username,\n          password: data.password,\n          // TODO 校验用户输入的用户名和密码\n        });\n        // 判断返回值\n        if (result?.errno === 0) {\n          localStorage.isLogin = true;\n          // 跳转\n          router.push({ name: \"Home\" });\n        } else {\n          showToast(\"登录失败\");\n          // alert(\"登录失败\");\n        }\n      } catch (e) {\n        showToast(\"登录请求失败\");\n      }\n    };\n\n    const handleRegister = () => {\n      router.push({ name: \"Register\" });\n    };\n    const torefsData = toRefs(data);\n    return {\n      handleLogin,\n      handleRegister,\n      show,\n      toastMessage,\n      ...torefsData,\n    };\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n@import \"../../style/viriables.scss\";\n.wrapper {\n  position: absolute;\n  left: 0;\n  top: 50%;\n  right: 0;\n  transform: translateY(-50%);\n  &__img {\n    display: block;\n    margin: 0 auto 0.4rem auto;\n    width: 0.66rem;\n    height: 0.66rem;\n  }\n  &__input {\n    height: 0.48rem;\n    margin: 0 0.4rem 0.16rem 0.4rem;\n    background: #f9f9f9;\n    border: 0.01rem solid rgba(0, 0, 0, 0.1);\n    border-radius: 0.06rem;\n    &__content {\n      line-height: 0.48rem;\n      border: none;\n      outline: none;\n      width: 100%;\n      background: none;\n      font-size: 0.16rem;\n      &::placeholder {\n        color: $content-notice-fontcolor;\n      }\n    }\n  }\n  &__login-button {\n    margin: 0.32rem 0.4rem 0.16rem 0.4rem;\n    line-height: 0.48rem;\n    background: #0091ff;\n    box-shadow: 0 0.04rem 0.08rem 0 rgba(0, 145, 255, 0.32);\n    border-radius: 0.04rem;\n    border-radius: 0.04rem;\n    color: $content-notice-fontcolor;\n    font-size: 0.16rem;\n    text-align: center;\n  }\n  &__login-link {\n    text-align: center;\n    font-size: 0.14rem;\n    color: $content-notice-fontcolor;\n  }\n}\n</style>\n"],"sourceRoot":""}]}