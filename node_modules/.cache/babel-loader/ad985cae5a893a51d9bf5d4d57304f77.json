{"remainingRequest":"/Users/panda/code/vue3+ts/pandong/node_modules/babel-loader/lib/index.js!/Users/panda/code/vue3+ts/pandong/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/panda/code/vue3+ts/pandong/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/panda/code/vue3+ts/pandong/src/views/orderList/OrderList.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/panda/code/vue3+ts/pandong/src/views/orderList/OrderList.vue","mtime":1616751788933},{"path":"/Users/panda/code/vue3+ts/pandong/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/panda/code/vue3+ts/pandong/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/panda/code/vue3+ts/pandong/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/panda/code/vue3+ts/pandong/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9wYW5kYS9jb2RlL3Z1ZTMrdHMvcGFuZG9uZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCB7IHJlYWN0aXZlLCB0b1JlZnMgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyBnZXQgfSBmcm9tICIuLi8uLi91dGlscy9yZXF1ZXN0IjsKaW1wb3J0IERvY2tlciBmcm9tICIuLi9ob21lL0RvY2tlciI7IC8vIOWkhOeQhuiuouWNleWIl+ihqOmAu+i+kQoKdmFyIHVzZU9yZGVyTGlzdEVmZmVjdCA9IGZ1bmN0aW9uIHVzZU9yZGVyTGlzdEVmZmVjdCgpIHsKICB2YXIgZGF0YSA9IHJlYWN0aXZlKHsKICAgIGxpc3Q6IFtdCiAgfSk7CgogIHZhciBnZXROZWFyYnlMaXN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgX3Jlc3VsdCRkYXRhOwoKICAgICAgdmFyIHJlc3VsdCwgb3JkZXJMaXN0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGdldCgiL2FwaS9vcmRlciIpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmICgocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0LmVycm5vKSA9PT0gMCAmJiByZXN1bHQgIT09IG51bGwgJiYgcmVzdWx0ICE9PSB2b2lkIDAgJiYgKF9yZXN1bHQkZGF0YSA9IHJlc3VsdC5kYXRhKSAhPT0gbnVsbCAmJiBfcmVzdWx0JGRhdGEgIT09IHZvaWQgMCAmJiBfcmVzdWx0JGRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBvcmRlckxpc3QgPSByZXN1bHQuZGF0YTsKICAgICAgICAgICAgICAgIG9yZGVyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChvcmRlcikgewogICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdHMgPSBvcmRlci5wcm9kdWN0cyB8fCBbXTsKICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsUHJpY2UgPSAwOwogICAgICAgICAgICAgICAgICB2YXIgdG90YWxOdW1iZXIgPSAwOwogICAgICAgICAgICAgICAgICBwcm9kdWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9kdWN0SXRlbSkgewogICAgICAgICAgICAgICAgICAgIHZhciBfcHJvZHVjdEl0ZW0kcHJvZHVjdDsKCiAgICAgICAgICAgICAgICAgICAgdG90YWxOdW1iZXIgKz0gKHByb2R1Y3RJdGVtID09PSBudWxsIHx8IHByb2R1Y3RJdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9kdWN0SXRlbS5vcmRlclNhbGVzKSB8fCAwOwogICAgICAgICAgICAgICAgICAgIHRvdGFsUHJpY2UgKz0gKHByb2R1Y3RJdGVtID09PSBudWxsIHx8IHByb2R1Y3RJdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3Byb2R1Y3RJdGVtJHByb2R1Y3QgPSBwcm9kdWN0SXRlbS5wcm9kdWN0KSA9PT0gbnVsbCB8fCBfcHJvZHVjdEl0ZW0kcHJvZHVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb2R1Y3RJdGVtJHByb2R1Y3QucHJpY2UpICogKHByb2R1Y3RJdGVtID09PSBudWxsIHx8IHByb2R1Y3RJdGVtID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9kdWN0SXRlbS5vcmRlclNhbGVzKSB8fCAwOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgb3JkZXIudG90YWxQcmljZSA9IHRvdGFsUHJpY2U7CiAgICAgICAgICAgICAgICAgIG9yZGVyLnRvdGFsTnVtYmVyID0gdG90YWxOdW1iZXI7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGRhdGEubGlzdCA9IHJlc3VsdC5kYXRhOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGdldE5lYXJieUxpc3QoKSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgZ2V0TmVhcmJ5TGlzdCgpOwoKICB2YXIgX3RvUmVmcyA9IHRvUmVmcyhkYXRhKSwKICAgICAgbGlzdCA9IF90b1JlZnMubGlzdDsKCiAgcmV0dXJuIHsKICAgIGxpc3Q6IGxpc3QKICB9Owp9OwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJPcmRlckxpc3QiLAogIGNvbXBvbmVudHM6IHsKICAgIERvY2tlcjogRG9ja2VyCiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgX3VzZU9yZGVyTGlzdEVmZmVjdCA9IHVzZU9yZGVyTGlzdEVmZmVjdCgpLAogICAgICAgIGxpc3QgPSBfdXNlT3JkZXJMaXN0RWZmZWN0Lmxpc3Q7CgogICAgcmV0dXJuIHsKICAgICAgbGlzdDogbGlzdAogICAgfTsKICB9Cn07"},{"version":3,"sources":["/Users/panda/code/vue3+ts/pandong/src/views/orderList/OrderList.vue"],"names":[],"mappings":";;;AAsCA,SAAS,QAAT,EAAmB,MAAnB,QAAiC,KAAjC;AACA,SAAS,GAAT,QAAoB,qBAApB;AACA,OAAO,MAAP,MAAmB,gBAAnB,C,CAEA;;AACA,IAAM,kBAAiB,GAAI,SAArB,kBAAqB,GAAM;AAC/B,MAAM,IAAG,GAAI,QAAQ,CAAC;AAAE,IAAA,IAAI,EAAE;AAAR,GAAD,CAArB;;AACA,MAAM,aAAY;AAAA,uEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACC,GAAG,CAAC,YAAD,CADJ;;AAAA;AACd,cAAA,MADc;;AAEpB,kBAAI,CAAA,MAAM,SAAN,IAAA,MAAM,WAAN,YAAA,MAAM,CAAE,KAAR,MAAkB,CAAlB,IAAuB,MAAvB,aAAuB,MAAvB,+BAAuB,MAAM,CAAE,IAA/B,yCAAuB,aAAc,MAAzC,EAAiD;AACzC,gBAAA,SADyC,GAC7B,MAAM,CAAC,IADsB;AAE/C,gBAAA,SAAS,CAAC,OAAV,CAAkB,UAAC,KAAD,EAAW;AAC3B,sBAAM,QAAO,GAAI,KAAK,CAAC,QAAN,IAAkB,EAAnC;AACA,sBAAI,UAAS,GAAI,CAAjB;AACA,sBAAI,WAAU,GAAI,CAAlB;AACA,kBAAA,QAAQ,CAAC,OAAT,CAAiB,UAAC,WAAD,EAAiB;AAAA;;AAChC,oBAAA,WAAU,IAAK,CAAA,WAAW,SAAX,IAAA,WAAW,WAAX,YAAA,WAAW,CAAE,UAAb,KAA2B,CAA1C;AACA,oBAAA,UAAS,IACP,CAAA,WAAW,SAAX,IAAA,WAAW,WAAX,oCAAA,WAAW,CAAE,OAAb,8EAAsB,KAAtB,KAA8B,WAA9B,aAA8B,WAA9B,uBAA8B,WAAW,CAAE,UAA3C,KAAyD,CAD3D;AAED,mBAJD;AAKA,kBAAA,KAAK,CAAC,UAAN,GAAmB,UAAnB;AACA,kBAAA,KAAK,CAAC,WAAN,GAAoB,WAApB;AACD,iBAXD;AAYA,gBAAA,IAAI,CAAC,IAAL,GAAY,MAAM,CAAC,IAAnB;AACF;;AAjBoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA,oBAAZ,aAAY;AAAA;AAAA;AAAA,KAAlB;;AAmBA,EAAA,aAAa;;AArBkB,gBAsBd,MAAM,CAAC,IAAD,CAtBQ;AAAA,MAsBvB,IAtBuB,WAsBvB,IAtBuB;;AAuB/B,SAAO;AAAE,IAAA,IAAG,EAAH;AAAF,GAAP;AACD,CAxBD;;AA0BA,eAAe;AACb,EAAA,IAAI,EAAE,WADO;AAEb,EAAA,UAAU,EAAE;AAAE,IAAA,MAAK,EAAL;AAAF,GAFC;AAGb,EAAA,KAHa,mBAGL;AAAA,8BACW,kBAAkB,EAD7B;AAAA,QACE,IADF,uBACE,IADF;;AAEN,WAAO;AAAE,MAAA,IAAG,EAAH;AAAF,KAAP;AACD;AANY,CAAf","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div class=\"title\">我的订单</div>\n    <div class=\"orders\">\n      <div class=\"order\" v-for=\"(item, index) in list\" :key=\"index\">\n        <div class=\"order__title\">\n          {{ item.shopName }}\n          <span class=\"order__status\">\n            {{ item.isCanceled ? \"已取消\" : \"已下单\" }}\n          </span>\n        </div>\n        <div class=\"order__content\">\n          <div class=\"order__content__imgs\">\n            <template\n              v-for=\"(innerItem, innerIndex) in item.products\"\n              :key=\"innerIndex\"\n            >\n              <img\n                class=\"order__content__img\"\n                :src=\"innerItem.product.img\"\n                v-if=\"innerIndex <= 3\"\n              />\n            </template>\n          </div>\n          <div class=\"order__content__info\">\n            <div class=\"order__content__price\">¥ {{ item.totalPrice }}</div>\n            <div class=\"order__content__count\">\n              共 {{ item.totalNumber }} 件\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <Docker :currentIndex=\"2\" />\n</template>\n\n<script>\nimport { reactive, toRefs } from \"vue\";\nimport { get } from \"../../utils/request\";\nimport Docker from \"../home/Docker\";\n\n// 处理订单列表逻辑\nconst useOrderListEffect = () => {\n  const data = reactive({ list: [] });\n  const getNearbyList = async () => {\n    const result = await get(\"/api/order\");\n    if (result?.errno === 0 && result?.data?.length) {\n      const orderList = result.data;\n      orderList.forEach((order) => {\n        const products = order.products || [];\n        let totalPrice = 0;\n        let totalNumber = 0;\n        products.forEach((productItem) => {\n          totalNumber += productItem?.orderSales || 0;\n          totalPrice +=\n            productItem?.product?.price * productItem?.orderSales || 0;\n        });\n        order.totalPrice = totalPrice;\n        order.totalNumber = totalNumber;\n      });\n      data.list = result.data;\n    }\n  };\n  getNearbyList();\n  const { list } = toRefs(data);\n  return { list };\n};\n\nexport default {\n  name: \"OrderList\",\n  components: { Docker },\n  setup() {\n    const { list } = useOrderListEffect();\n    return { list };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../style/viriables.scss\";\n.wrapper {\n  overflow-y: auto;\n  position: absolute;\n  left: 0;\n  top: 0;\n  bottom: 0.5rem;\n  right: 0;\n  background: $dark-bgColor;\n}\n.title {\n  line-height: 0.44rem;\n  background: $bgColor;\n  font-size: 0.16rem;\n  color: $content-fontcolor;\n  text-align: center;\n}\n.order {\n  margin: 0.16rem 0.18rem;\n  padding: 0.16rem;\n  background: $bgColor;\n  &__title {\n    margin-bottom: 0.16rem;\n    line-height: 0.22rem;\n    font-size: 0.16rem;\n    color: $content-fontcolor;\n  }\n  &__status {\n    float: right;\n    font-size: 0.14rem;\n    color: $light-fontColor;\n  }\n  &__content {\n    display: flex;\n    &__imgs {\n      flex: 1;\n    }\n    &__img {\n      width: 0.4rem;\n      height: 0.4rem;\n      margin-right: 0.12rem;\n    }\n    &__info {\n      width: 0.7rem;\n    }\n    &__price {\n      margin-bottom: 0.04rem;\n      line-height: 0.2rem;\n      font-size: 0.14rem;\n      color: $hightlight-fontColor;\n      text-align: right;\n    }\n    &__count {\n      line-height: 0.14rem;\n      font-size: 0.12rem;\n      color: $content-fontcolor;\n      text-align: right;\n    }\n  }\n}\n</style>\n"],"sourceRoot":""}]}